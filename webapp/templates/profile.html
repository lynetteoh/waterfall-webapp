{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Waterfall - Profile</title>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="{% static "js/profile.js" %}" type="text/javascript"></script>
<style type="text/css">

/* Enables and disables the form. */
input[type="text"] {
  font-size: 16px;
}
input[type="text"][readonly] {
  border: 2px solid rgba(0,0,0,0);
}

</style>
{% endblock %}

{% block content %}

<div class="container bootstrap snippet">
    <div class="row profile">
  		<div class="col-sm-10">
        <h1>Account Profile &nbsp;&nbsp;
          <button class="btn" type="button" value="Edit" onclick="editProfile()" style="font-size:20px;">
            <i class="fas fa-edit"></i>&nbsp;Edit
          </button>
        </h1>
      </div>
    </div>
    </br>
    <div class="row">
  		<div class="col-sm-3" style="min-width:230px;"><!--left col-->

      <div class="text-center">
      {% if user.profile.avatar %}
        <img src="{{ user.profile.avatar.url }}" class="avatar img-circle img-thumbnail" alt="avatar">
      {% else %}
        <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="avatar img-circle img-thumbnail" alt="avatar">
      {% endif %}
      </br></br>
        <h4>@{{ user.username }}</h4>
        </br>
        <div id="upload-pic" style="display:none;">
          <h6>Upload New Profile Picture</h6>

          <form role="form" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {% if form.errors %}
            <p>Upload a valid image. The file you uploaded was either not an image or a corrupted image.</p>
            {% endif %}
            <input name="avatar" id="avatar" type="file" class="file-upload">
            </br></br> 
            <button class="btn btn-xs"  type="submit">
              <i class="fas fa-check"></i> &nbsp;Upload
            </button>
            </hr></br></br>
          </form>
        </div>
      </div>

      <ul class="list-group">
        <li class="list-group-item"><strong>Activity</strong><i class="fa fa-dashboard fa-1x"></i></li>
        <li class="list-group-item text-right text-muted" style="text-align:left;"><span style="float:left;">Payments</span>{{ user.account.num_payments }}</li>
        <li class="list-group-item text-right text-muted"><span style="float:left;">Requests</span>{{ user.account.num_requests }}</li>
        <li class="list-group-item text-right text-muted"><span style="float:left;">Groups</span>{{ user.account.num_groups }}</li>
      </ul>

      </div><!--/col-3-->
    	<div class="col-sm-9" style="padding-left:40px;">
          <form id="edit-form" role="form" method="POST" onsubmit="event.preventDefault(); checkForm()">
          {% csrf_token %}
              <div class="form-group">
                  <div class="col-xs-6">
                      <label for="first_name">
                        <h5>First Name</h5></label>
                      <input type="text" class="form-control" name="first_name" id="first_name" readonly value="{{ user.first_name }}">
                  </div>
              </div>
              <div class="form-group">
                  <div class="col-xs-6">
                    <label for="last_name"><h4>Last name</h4></label>
                      <input type="text" class="form-control" name="last_name" id="last_name" readonly value="{{ user.last_name }}">
                  </div>
              </div>
              <div class="form-group">
                  <div class="col-xs-6">
                    <label for="email"><h5>Email</h5></label>
                      <input type="text" class="form-control" name="email" id="email" readonly value="{{ user.email }}">
                  </div>
              </div>
              <div id="change-settings" style="display:none;"> <!-- start of change settings -->
                <div class="form-group">
                    <div class="col-xs-6">
                      <label for="password"><h5>Change Password</h5></label>
                        <input type="password" class="form-control" name="password" id="password" placeholder="New Password">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-6">
                      <label for="password2"><h5>Verify New Password</h5></label>
                        <input type="password" class="form-control" name="password2" id="password2" placeholder="Confirm New Password" title="enter your password2.">
                    </div>
                </div>
                <div class="form-group">
                     <div class="col-xs-12 text-left">
                          <br>
                        	<button class="btn btn-lg btn-success"  type="submit">
                            <i class="fas fa-check"></i> &nbsp;Save
                          </button>
                          &nbsp; &nbsp;
                         	<button class="btn btn-lg btn-danger" type="reset" onclick="disableProfileForm()"><i class="fas fa-ban" ></i>&nbsp;Cancel</button>
                      </div>
                </div>
              </div> <!-- end of change-settings -->
      	</form>

      </div> <!-- col-sm-9 -->

    </div><!--/row-->
    <br/><br/>
</div>
{% endblock %}
