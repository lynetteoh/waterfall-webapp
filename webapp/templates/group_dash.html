{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Waterfall</title>
{% endblock %}

{% block css %}
<link href="{% static "css/dash.css" %}" rel="stylesheet" type="text/css">
<link href="{% static "css/g_dash.css" %}" rel="stylesheet" type="text/css">

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="{% static "js/dash.js" %}" type="text/javascript"></script>
{% endblock %}


{% block content %}
<div>
</div>
<div class="">
        <h1>Group Dashboard &nbsp;&nbsp;</h1>
        <br/>
        <div class="row">
            <div class="col-sm-4">
                <h3 class="subheader" style="padding-top:0px;">{{ groupName }} </h3>
            </div>
            <div class="col">
                    <button class="btn" type="button" value="Edit" onclick="editProfile()" style="font-size:16px;">
                            <i class="fas fa-edit"></i>&nbsp;Edit
                          </button>
            </div>
        </div>
        <br/>
        <br/>
        <div class="">
                <br/>
                <h3 class="subheader" style="padding-top:15px;color: grey; text-align: center;">$10000</h3>
                <br/>
              </div>
                <!-- Balance Edit Buttons -->
              <div class="col" id="balance-buttons">
                <div class="row">
                  <div class="col button-row">
                    <form class="form-inline" role="form" id="deposit" onsubmit="event.preventDefault(); balancePopup(false)" method="POST">
                      {% csrf_token %}
                      <div class="deposit_inner">
                      
                      <input type="text" style="display: inline-block;" class="text-center form-control" name="add_amount" placeholder="0.00" value="0.00" id="add-amount">
                        <button style="display: inline-block !important;" class="btn btn-lg btn-success text-center" type="submit" value="Add" id="plus-button">
                          Deposit
                        </button>
                      </div>
                    </form>
                  </div>
                  <div class="col button-row">
                  <center>
                  <form class="form-inline" role="form" id="withdraw" onsubmit="event.preventDefault(); balancePopup(true)" method="POST">
                    {% csrf_token %}
                    <div class="deposit_inner">
        
                      <input type="text" style="display: inline-block;" class="text-center form-control" name="minus_amount" id="minus-amount" value="0.00" placeholder="0.00">
                        <button style="display: inline-block !important;" class="btn btn-lg btn-danger" type="submit" value="Withdraw" id="minus-button">
                          Withdraw
                        </button>
                      </div>
                  </form></center>
                </div>
                </div>
              </div><!-- end of buttons -->
              <br/><br/>
              <table class="table">
                    <thead>
                      <tr class="income_header_row">
                        <th style="width:25%; text-align:center;" scope="col">Name</th>
                        <th style="width:35%;" scope="col">Description</th>
                        <th style="width:10%; text-align:center;" scope="col">Amount</th>
                        <th style="width:25%; text-align:center;" scope="col"></th>
                      </tr>
                    </thead>
                    <tbody>
                        {% for tx in requests %}
                        <tr>
                            <td>{{ tx.deadline }}</td>
                            <td>{{ tx.tx_to.account }}</td>
                            <td>{{ tx.tx_to.title | truncatechars:30 }}</td>
                            <td style="text-align:center;">${{ tx.tx_from.value | floatformat:"2"}}</td>
                            <td style="text-align:center;">
                              <form style="float:right;" id="delete-req-form" onsubmit="event.preventDefault(); confirmPopup("delete-req-form")" method="POST">
                                    {% csrf_token %}
                                      <input type="hidden" name="req" id="delete-req" value="delete-req">
                                      <input type="hidden" name="transfer" value={{tx.id}}>
                                      <div class="request_btn">
                                          <button type="submit" value="delete-req" class="btn reject_btn btn-outline-success" style="outline:none;">
                                            <i class="fas fa-times"></i>
                                          </button>
                                      </div>
                              </form>

                              <form style="float:right;" id="approve-req-form" onsubmit="event.preventDefault(); confirmPopup("approve-req-form")" method="POST">
                                    {% csrf_token %}
                                      <input type="hidden" name="req" id="approve-req" value="approve-req">
                                      <input type="hidden" name="transfer" value={{tx.id}}>
                                      <div class="request_btn">
                                          <button type="submit" value="approve-req" class="btn accept_btn btn-outline-success" style="outline:none;">
                                            <i class="fas fa-check"></i>
                                          </button>
                                      </div>
                                </form>

                            </form>
                            </td>

                        </tr>
                        {% endfor %}
                        <tr>
                            <td style="text-align:center;" >Johnny</td>
                            <td>Some stuff</td>
                            <td style="text-align:center;">$399</td>
                            <td style="text-align:center;">
                                <form style="float:right;" id="delete-req-form" onsubmit="event.preventDefault(); confirmPopup("delete-req-form")" method="POST">
                                    {% csrf_token %}
                                        <input type="hidden" name="req" id="delete-req" value="delete-req">
                                        <input type="hidden" name="transfer" value={{tx.id}}>
                                        <div class="request_btn">
                                            <button type="submit" value="delete-req" class="btn reject_btn btn-outline-success" style="outline:none;">
                                            <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                </form>

                                <form style="float:right;" id="approve-req-form" onsubmit="event.preventDefault(); confirmPopup("approve-req-form")" method="POST">
                                    {% csrf_token %}
                                        <input type="hidden" name="req" id="approve-req" value="approve-req">
                                        <input type="hidden" name="transfer" value={{tx.id}}>
                                        <div class="request_btn">
                                            <button type="submit" value="approve-req" class="btn accept_btn btn-outline-success" style="outline:none;">
                                            <i class="fas fa-check"></i>
                                            </button>
                                        </div>
                                </form>

                            </form>
                            </td>

                        </tr>
                    </tbody>
                  </table>
      </div>

<script>
checkError("{{error}}");
</script>
{% endblock %}
